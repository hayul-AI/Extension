<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelConvert â€” Free Online Image Converter & OCR</title>
    <meta name="description" content="Convert, compress, and extract text from images instantly. HEIC, JPG, PNG, WEBP, PDF, and OCR tools. No uploads, 100% browser-based.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6460078490158642" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/heic2any/0.0.4/heic2any.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <style>
        :root {
            --brand-primary: #6366f1;
            --brand-secondary: #a855f7;
            --brand-accent: #f43f5e;
            --brand-success: #10b981;
            --bg-light: #fdfdfe;
            --bg-dark: #0b0f1a;
            --card-light: rgba(255, 255, 255, 0.7);
            --card-dark: rgba(17, 24, 39, 0.7);
            --border-light: rgba(0, 0, 0, 0.06);
            --border-dark: rgba(255, 255, 255, 0.06);
            --text-main-light: #1e293b;
            --text-main-dark: #f1f5f9;
            --text-sub-light: #64748b;
            --text-sub-dark: #94a3b8;
            --radius-xl: 32px;
            --radius-lg: 20px;
            --shadow-premium: 0 20px 50px -12px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-base: var(--bg-dark);
            --card-base: var(--card-dark);
            --border-base: var(--border-dark);
            --text-main: var(--text-main-dark);
            --text-sub: var(--text-sub-dark);
            --glass-bg: rgba(15, 23, 42, 0.8);
        }

        [data-theme="light"] {
            --bg-base: var(--bg-light);
            --card-base: var(--card-light);
            --border-base: var(--border-light);
            --text-main: var(--text-main-light);
            --text-sub: var(--text-sub-light);
            --glass-bg: rgba(255, 255, 255, 0.8);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-base);
            color: var(--text-main);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-x: hidden;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        .ambient-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            overflow: hidden;
            background: var(--bg-base);
        }

        .ambient-blob {
            position: absolute;
            width: 60vw; height: 60vw;
            border-radius: 50%;
            filter: blur(120px);
            opacity: 0.15;
            animation: float 30s infinite alternate ease-in-out;
        }

        .blob-1 { top: -10%; left: -10%; background: var(--brand-primary); }
        .blob-2 { bottom: -10%; right: -10%; background: var(--brand-secondary); animation-delay: -10s; }
        .blob-3 { top: 40%; left: 30%; background: var(--brand-accent); animation-duration: 40s; opacity: 0.1; }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(10vw, 15vh) rotate(120deg); }
        }

        .container {
            width: 95%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 3rem 1.5rem;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6rem;
        }

        .logo-group {
            display: flex; align-items: center; gap: 1rem;
            text-decoration: none; color: inherit;
        }

        .logo-icon {
            width: 44px; height: 44px;
            background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary));
            border-radius: 12px;
            display: grid; place-items: center;
            color: white;
            box-shadow: 0 8px 16px -4px rgba(99, 102, 241, 0.4);
        }

        .logo-text { font-weight: 800; font-size: 1.5rem; letter-spacing: -0.04em; }

        .theme-toggle {
            padding: 0.75rem 1.5rem;
            background: var(--card-base);
            border: 1px solid var(--border-base);
            border-radius: 16px;
            cursor: pointer;
            font-weight: 700;
            display: flex; align-items: center; gap: 0.75rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .theme-toggle:hover { transform: translateY(-2px); border-color: var(--brand-primary); }

        .hero { text-align: center; margin-bottom: 6rem; }
        .hero h1 {
            font-size: 4.5rem; font-weight: 800; letter-spacing: -0.06em;
            line-height: 1.1; margin-bottom: 1.5rem;
            background: linear-gradient(to right, var(--text-main), var(--brand-primary));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .hero p { font-size: 1.25rem; color: var(--text-sub); max-width: 700px; margin: 0 auto; font-weight: 500; }

        .tabs-container {
            position: sticky; top: 2rem; z-index: 100;
            margin-bottom: 4rem;
        }

        .tabs {
            display: flex; gap: 0.5rem; padding: 0.6rem;
            background: var(--glass-bg);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border: 1px solid var(--border-base);
            border-radius: 24px;
            overflow-x: auto;
            scrollbar-width: none;
            box-shadow: var(--shadow-premium);
        }
        .tabs::-webkit-scrollbar { display: none; }

        .tab-button {
            padding: 0.8rem 1.75rem; font-size: 0.95rem; font-weight: 700;
            white-space: nowrap; border: none; background: transparent;
            color: var(--text-sub); border-radius: 18px; cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .tab-button:hover { color: var(--brand-primary); }
        .tab-button.active {
            background: var(--brand-primary); color: white;
            box-shadow: 0 10px 20px -5px rgba(99, 102, 241, 0.4);
        }

        .tab-content {
            display: none; padding: 4rem;
            background: var(--card-base);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border-radius: var(--radius-xl);
            border: 1px solid var(--border-base);
            box-shadow: var(--shadow-premium);
            animation: reveal 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        @keyframes reveal {
            from { opacity: 0; transform: translateY(40px) scale(0.96); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .tab-content.active { display: block; }

        .tool-info {
            margin-bottom: 3rem;
            border-bottom: 1px solid var(--border-base);
            padding-bottom: 2rem;
        }

        .tool-info h3 { font-size: 1.75rem; font-weight: 800; margin-bottom: 1rem; color: var(--brand-primary); }
        .tool-info p { margin-bottom: 1rem; color: var(--text-sub); }
        .tool-steps { margin: 1.5rem 0; padding-left: 1.5rem; }
        .tool-steps li { margin-bottom: 0.5rem; font-weight: 600; color: var(--text-main); }
        
        .faq-block { margin-top: 2rem; }
        .faq-item-small { margin-bottom: 1.5rem; }
        .faq-item-small strong { display: block; margin-bottom: 0.25rem; color: var(--text-main); }
        .faq-item-small span { color: var(--text-sub); font-size: 0.95rem; }

        .privacy-note {
            display: inline-flex; align-items: center; gap: 0.5rem;
            padding: 0.75rem 1.25rem; background: rgba(16, 185, 129, 0.1);
            color: var(--brand-success); border-radius: 12px; font-weight: 700;
            font-size: 0.9rem; margin-top: 1rem;
        }

        .drop-zone {
            border: 2px dashed var(--border-base);
            border-radius: var(--radius-lg);
            padding: 5rem 2rem;
            text-align: center;
            transition: all 0.4s;
            cursor: pointer;
            background: rgba(0,0,0,0.01);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
        }

        .drop-zone:hover, .drop-zone.dragover {
            border-color: var(--brand-primary);
            background: rgba(99, 102, 241, 0.03);
            transform: translateY(-4px);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary));
            color: white; padding: 1rem 2.5rem; border-radius: 16px;
            font-weight: 800; border: none; cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 20px -5px rgba(99, 102, 241, 0.4);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px) scale(1.02);
            filter: brightness(1.1);
            box-shadow: 0 20px 30px -8px rgba(99, 102, 241, 0.5);
        }

        .btn-success {
            width: 100%; padding: 1.25rem; font-size: 1.1rem; font-weight: 800;
            background: linear-gradient(135deg, var(--brand-success), #059669);
            color: white; border: none; border-radius: 18px; cursor: pointer;
            margin-top: 3rem; transition: all 0.3s;
            box-shadow: 0 10px 20px -5px rgba(16, 185, 129, 0.3);
        }

        .btn-success:hover:not(:disabled) { transform: translateY(-2px); filter: brightness(1.05); }

        .progress-wrapper {
            margin-top: 3rem; height: 16px;
            background: var(--border-base); border-radius: 9999px;
            overflow: hidden; display: none;
        }

        .progress-fill {
            width: 0%; height: 100%;
            background: linear-gradient(90deg, var(--brand-primary), var(--brand-secondary));
            transition: width 0.4s ease;
        }

        .results-grid {
            margin-top: 4rem; display: grid; gap: 1.25rem;
        }

        .result-card {
            background: var(--bg-base);
            border: 1px solid var(--border-base);
            padding: 1.5rem; border-radius: 24px;
            display: flex; align-items: center; gap: 1.5rem;
            transition: all 0.3s;
        }

        .result-card:hover { transform: scale(1.02); border-color: var(--brand-primary); }

        #ocr-result-area, #ocrResult {
            width: 100%; height: 300px;
            margin-top: 2rem; padding: 1.5rem;
            border-radius: 18px; border: 1px solid var(--border-base);
            background: rgba(0,0,0,0.02); color: var(--text-main);
            font-size: 1rem; line-height: 1.7; resize: vertical;
        }

        .ad-container {
            margin: 2rem 0;
            padding: 1rem;
            background: rgba(0,0,0,0.03);
            border: 1px dashed var(--border-base);
            border-radius: 16px;
            text-align: center;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-sub);
            font-size: 0.8rem;
            font-weight: 600;
        }

        .issues-panel {
            margin-top: 1rem;
            padding: 1.5rem;
            background: var(--card-base);
            border: 1px solid var(--brand-accent);
            border-radius: 16px;
            display: none;
        }

        .issue-item {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-base);
        }

        .issue-message { font-weight: 700; color: var(--brand-accent); margin-bottom: 0.5rem; }
        .suggestion-btn {
            background: var(--brand-primary);
            color: white;
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 8px;
            margin-right: 0.5rem;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .faq-grid {
            margin-top: 10rem; display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .faq-item {
            background: var(--card-base); padding: 2.5rem;
            border-radius: var(--radius-xl); border: 1px solid var(--border-base);
        }

        .faq-item h4 { font-weight: 800; margin-bottom: 1rem; color: var(--brand-primary); }

        footer {
            margin-top: 12rem; padding: 6rem 0; text-align: center;
            border-top: 1px solid var(--border-base);
        }

        .footer-nav { margin-bottom: 3rem; }
        .footer-nav a {
            color: var(--text-sub); text-decoration: none; font-weight: 700;
            margin: 0 1.5rem; transition: color 0.3s;
        }
        .footer-nav a:hover { color: var(--brand-primary); }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border-base); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--text-sub); }

        @media (max-width: 768px) {
            .hero h1 { font-size: 3rem; }
            .tab-content { padding: 2rem; }
            .hero { margin-bottom: 4rem; }
        }
    </style>
</head>
<body data-theme="light">
    <div class="ambient-bg">
        <div class="ambient-blob blob-1"></div>
        <div class="ambient-blob blob-2"></div>
        <div class="ambient-blob blob-3"></div>
    </div>

    <div class="container">
        <header>
            <a href="index.html" class="logo-group">
                <div class="logo-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                    </svg>
                </div>
                <span class="logo-text">PixelConvert</span>
            </a>
            <button class="theme-toggle" id="theme-toggle">
                <span class="theme-icon">ðŸŒ™</span>
                <span class="theme-text">Dark Mode</span>
            </button>
        </header>

        <section class="hero">
            <h1>Free Online Image Converter & OCR</h1>
            <p>Convert, compress, and extract text from images instantly. No uploads, no registration â€” everything runs in your browser.</p>
        </section>

        <div class="tabs-container">
            <nav class="tabs">
                <button class="tab-button active" data-tab="heic-to-jpg">HEIC to JPG Converter</button>
                <button class="tab-button" data-tab="webp-to-jpg">WEBP to JPG Converter</button>
                <button class="tab-button" data-tab="png-to-jpg">PNG to JPG Converter</button>
                <button class="tab-button" data-tab="jpg-to-png">JPG to PNG Converter</button>
                <button class="tab-button" data-tab="compress">Image Compressor</button>
                <button class="tab-button" data-tab="ocr">Image to Text (OCR)</button>
                <button class="tab-button" data-tab="jpg-to-pdf">Images to PDF</button>
                <button class="tab-button" data-tab="favicon">Favicon Generator</button>
            </nav>
        </div>

        <main>
            <div class="ad-container top-ad">Advertisement Space</div>

            <!-- HEIC Tab -->
            <div id="heic-to-jpg" class="tab-content active">
                <div class="tool-info">
                    <h3>Professional HEIC to JPG Converter</h3>
                    <p>Easily convert Apple's high-efficiency image format (HEIC) to universally compatible JPG files. Our converter preserves image metadata and quality while ensuring your photos can be opened on any device.</p>
                    <p>This tool is ideal for iPhone users who need to share photos with Windows, Android, or web platforms that don't yet support the HEIF standard.</p>
                    <ul class="tool-steps">
                        <li>Select or drag and drop your .heic or .heif files.</li>
                        <li>Click "Process Images" to start the local conversion.</li>
                        <li>Download your high-quality JPG files instantly.</li>
                    </ul>
                    <div class="faq-block">
                        <div class="faq-item-small">
                            <strong>Is this converter safe to use?</strong>
                            <span>Yes. PixelConvert processes images entirely in your browser's memory. No data is sent to our servers.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Can I convert multiple HEIC files at once?</strong>
                            <span>Absolutely! Our batch converter can handle dozens of files simultaneously with pro-grade speed.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Do I lose image quality?</strong>
                            <span>We use optimized algorithms to ensure minimal quality loss during the HEIC to JPG conversion process.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Does it support .HEIF files?</strong>
                            <span>Yes, both .heic and .heif extensions are supported.</span>
                        </div>
                    </div>
                    <div class="privacy-note">Files are processed locally in your browser. Nothing is uploaded.</div>
                </div>
                <div class="drop-zone">
                    <p style="font-weight: 800; font-size: 1.25rem;">Drop HEIC files here</p>
                    <label class="btn-primary">Select Files</label>
                    <input type="file" class="file-input" multiple accept=".heic, .heif" style="display: none;">
                </div>
                <button class="btn-success convert-button" disabled>Process Images</button>
                <div class="progress-wrapper"><div class="progress-fill"></div></div>
                <div class="results-grid results"></div>
            </div>

            <!-- WEBP Tab -->
            <div id="webp-to-jpg" class="tab-content">
                <div class="tool-info">
                    <h3>Fast WEBP to JPG Converter</h3>
                    <p>Convert modern WEBP images back to standard JPG format in seconds. While WEBP is great for the web, JPG remains the standard for editing, printing, and sharing across all software.</p>
                    <p>Our tool uses your browser's hardware acceleration to provide near-instant results even for high-resolution graphics.</p>
                    <ul class="tool-steps">
                        <li>Upload your .webp files from your computer.</li>
                        <li>The tool automatically prepares the standard JPG output.</li>
                        <li>Save the converted images to your local drive.</li>
                    </ul>
                    <div class="faq-block">
                        <div class="faq-item-small">
                            <strong>Why convert WEBP to JPG?</strong>
                            <span>Many older applications and some social media platforms do not fully support the WEBP format.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Is there a file size limit?</strong>
                            <span>Since processing happens locally, the limit depends on your device's RAM, but it easily handles most high-res photos.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Can I use this on mobile?</strong>
                            <span>Yes, PixelConvert is fully responsive and works perfectly on iOS and Android browsers.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Does it cost anything?</strong>
                            <span>No, our converter is 100% free with no hidden subscriptions.</span>
                        </div>
                    </div>
                    <div class="privacy-note">Files are processed locally in your browser. Nothing is uploaded.</div>
                </div>
                <div class="drop-zone">
                    <p style="font-weight: 800; font-size: 1.25rem;">Drop WEBP files here</p>
                    <label class="btn-primary">Select Files</label>
                    <input type="file" class="file-input" multiple accept=".webp" style="display: none;">
                </div>
                <button class="btn-success convert-button" disabled>Convert Now</button>
                <div class="progress-wrapper"><div class="progress-fill"></div></div>
                <div class="results-grid results"></div>
            </div>

            <!-- PNG Tab -->
            <div id="png-to-jpg" class="tab-content">
                <div class="tool-info">
                    <h3>High-Quality PNG to JPG Converter</h3>
                    <p>Convert transparent PNG images to optimized JPG files. This is perfect for reducing file sizes for web use while maintaining high visual fidelity.</p>
                    <p>You can manually adjust the output quality to find the perfect balance between file size and image clarity.</p>
                    <ul class="tool-steps">
                        <li>Add your PNG images to the converter.</li>
                        <li>Adjust the quality slider if you need a specific file size.</li>
                        <li>Download the resulting JPG images instantly.</li>
                    </ul>
                    <div class="faq-block">
                        <div class="faq-item-small">
                            <strong>What happens to transparency?</strong>
                            <span>Since JPG doesn't support transparency, any transparent areas will be filled with a solid white background.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Does this reduce file size?</strong>
                            <span>Yes, JPG is a lossy format and is typically much smaller than PNG for photographic content.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Can I batch convert?</strong>
                            <span>Yes, you can upload and convert multiple PNGs at once.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Is the quality good?</strong>
                            <span>By setting the slider to 0.9 or higher, you can maintain excellent quality that is indistinguishable from the original.</span>
                        </div>
                    </div>
                    <div class="privacy-note">Files are processed locally in your browser. Nothing is uploaded.</div>
                </div>
                <div class="drop-zone">
                    <p style="font-weight: 800; font-size: 1.25rem;">Drop PNG images here</p>
                    <label class="btn-primary">Select Files</label>
                    <input type="file" class="file-input" multiple accept=".png" style="display: none;">
                </div>
                <div class="options" style="margin-top: 3rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <label style="font-weight: 700;">Output Quality</label>
                        <span class="quality-value" style="font-weight: 800; color: var(--brand-primary);">0.92</span>
                    </div>
                    <input type="range" id="png-to-jpg-quality" min="0.1" max="1.0" value="0.92" step="0.01">
                </div>
                <button class="btn-success convert-button" disabled>Generate JPGs</button>
                <div class="progress-wrapper"><div class="progress-fill"></div></div>
                <div class="results-grid results"></div>
            </div>

            <!-- JPG to PNG Tab -->
            <div id="jpg-to-png" class="tab-content">
                <div class="tool-info">
                    <h3>Lossless JPG to PNG Converter</h3>
                    <p>Convert JPG photos to PNG format when you need a lossless container for further editing or web development. PNG is the preferred format for graphics that require high precision.</p>
                    <p>This process is entirely client-side, ensuring your private photos never leave your device.</p>
                    <ul class="tool-steps">
                        <li>Select the JPG files you wish to convert.</li>
                        <li>Wait for the local processing to finish.</li>
                        <li>Download your new PNG files one by one or as a pack.</li>
                    </ul>
                    <div class="faq-block">
                        <div class="faq-item-small">
                            <strong>Will the file size increase?</strong>
                            <span>Yes, PNG is usually larger than JPG because it uses lossless compression.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Does this improve the image quality?</strong>
                            <span>No, converting to PNG cannot "restore" detail lost in the original JPG, but it prevents further loss during saving.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Is it free for commercial use?</strong>
                            <span>Yes, PixelConvert is free for all types of usage.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Do I need to register?</strong>
                            <span>No registration or email is required. Just upload and convert.</span>
                        </div>
                    </div>
                    <div class="privacy-note">Files are processed locally in your browser. Nothing is uploaded.</div>
                </div>
                <div class="drop-zone">
                    <p style="font-weight: 800; font-size: 1.25rem;">Drop JPG photos here</p>
                    <label class="btn-primary">Select Files</label>
                    <input type="file" class="file-input" multiple accept=".jpg, .jpeg" style="display: none;">
                </div>
                <button class="btn-success convert-button" disabled>Convert to PNG</button>
                <div class="progress-wrapper"><div class="progress-fill"></div></div>
                <div class="results-grid results"></div>
            </div>

            <!-- Compress Tab -->
            <div id="compress" class="tab-content">
                <div class="tool-info">
                    <h3>Smart Image Compressor</h3>
                    <p>Reduce the file size of your images without losing visible quality. Our compressor uses advanced Canvas algorithms to shrink JPG, PNG, and WEBP files for faster website loading and easier email sharing.</p>
                    <p>Use our "Auto-Target" presets to quickly hit specific file size limits (like 200KB or 1MB) required by many government and corporate portals.</p>
                    <ul class="tool-steps">
                        <li>Select multiple images to compress in batch.</li>
                        <li>Choose a target size preset or adjust quality manually.</li>
                        <li>Download the optimized images instantly.</li>
                    </ul>
                    <div class="faq-block">
                        <div class="faq-item-small">
                            <strong>What is "Manual" mode?</strong>
                            <span>Manual mode lets you pick a specific quality percentage (0.1 to 0.95) for the compression.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>How does "Auto-Target" work?</strong>
                            <span>The tool performs a binary search to find the highest quality setting that stays under your chosen file size limit.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Are my original images deleted?</strong>
                            <span>We never have your images. They stay on your computer. Your originals remain untouched in your folders.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Which formats can I compress?</strong>
                            <span>We support JPG, JPEG, PNG, and WEBP compression.</span>
                        </div>
                    </div>
                    <div class="privacy-note">Files are processed locally in your browser. Nothing is uploaded.</div>
                </div>
                <div class="drop-zone">
                    <p style="font-weight: 800; font-size: 1.25rem;">Drop images to shrink</p>
                    <label class="btn-primary">Select Files</label>
                    <input type="file" class="file-input" multiple accept=".jpg, .jpeg, .png, .webp" style="display: none;">
                </div>
                 <div class="options" style="margin-top: 3rem; display: grid; gap: 2rem;">
                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                            <label style="font-weight: 700;">Quality Level</label>
                            <span class="quality-value" style="font-weight: 800; color: var(--brand-primary);">0.8</span>
                        </div>
                        <input type="range" id="compress-quality" min="0.4" max="0.95" value="0.8" step="0.01">
                    </div>
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <label style="font-weight: 700;">Maximum Width</label>
                        <select id="compress-resize" style="padding: 0.75rem 1rem; border-radius: 12px; border: 1px solid var(--border-base); background: var(--bg-base); color: inherit; font-weight: 700;">
                            <option value="original">Original</option>
                            <option value="1920">1920px (FHD)</option>
                            <option value="1280">1280px (HD)</option>
                            <option value="1080">1080px</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: 700; display: block; margin-bottom: 1rem;">Auto-Target Presets</label>
                        <div style="display: flex; gap: 0.75rem;">
                            <button class="preset-btn" data-target="204800">200KB</button>
                            <button class="preset-btn" data-target="512000">500KB</button>
                            <button class="preset-btn" data-target="1048576">1MB</button>
                            <button class="preset-btn active" data-target="0">Manual</button>
                        </div>
                    </div>
                </div>
                <button class="btn-success convert-button" disabled>Optimize Now</button>
                <div class="progress-wrapper"><div class="progress-fill"></div></div>
                <div class="results-grid results"></div>
            </div>

            <!-- OCR Tab -->
            <div id="ocr" class="tab-content">
                <div class="tool-info">
                    <h3>Free Image to Text (OCR) Converter</h3>
                    <p>Extract text from any image using our powerful Optical Character Recognition (OCR) engine. Perfect for digitizing scanned documents, receipts, or notes from your camera. All processing is done locally via WebAssembly.</p>
                    <p>Our engine supports both English and Korean text recognition, with built-in grammar checking and text cleanup tools to ensure your digitized data is accurate and ready for use.</p>
                    <ul class="tool-steps">
                        <li>Upload an image containing text (JPG, PNG, or WEBP).</li>
                        <li>Wait for the OCR engine to analyze and extract the content.</li>
                        <li>Review, copy, or save the extracted text as a .txt file.</li>
                    </ul>
                    <div class="faq-block">
                        <div class="faq-item-small">
                            <strong>Which languages are supported?</strong>
                            <span>Currently, our local engine is optimized for English and Korean (Hangul).</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Can I extract text from handwriting?</strong>
                            <span>Our tool works best with printed text. Recognition accuracy for handwriting varies based on legibility.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Is there a character limit?</strong>
                            <span>No, you can process entire pages of text at once.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>What is "Check Grammar"?</strong>
                            <span>It uses the LanguageTool API to find and fix spelling or grammar errors in the extracted text.</span>
                        </div>
                    </div>
                    <div class="privacy-note">Files are processed locally in your browser. Nothing is uploaded.</div>
                </div>
                <div class="drop-zone">
                    <p style="font-weight: 800; font-size: 1.25rem;">Drop image with text</p>
                    <label class="btn-primary">Select Image</label>
                    <input type="file" class="file-input" accept="image/*" style="display: none;">
                </div>
                <div class="options" style="margin-top: 3rem;">
                    <div style="display: flex; gap: 2rem; margin-bottom: 2rem;">
                        <label style="display: flex; align-items: center; gap: 0.75rem; font-weight: 700; cursor: pointer;"><input type="checkbox" id="ocr-grayscale" checked style="width: 20px; height: 20px; accent-color: var(--brand-primary);"> Grayscale</label>
                        <label style="display: flex; align-items: center; gap: 0.75rem; font-weight: 700; cursor: pointer;"><input type="checkbox" id="ocr-contrast" checked style="width: 20px; height: 20px; accent-color: var(--brand-primary);"> High Contrast</label>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <label style="font-weight: 700;">Clean-up Threshold</label>
                        <span id="threshold-value" style="font-weight: 800; color: var(--brand-primary);">128</span>
                    </div>
                    <input type="range" id="ocr-threshold" min="0" max="255" value="128">
                </div>
                <button class="btn-success convert-button" id="ocr-start-btn" disabled>Scan & Extract</button>
                <div class="progress-wrapper" id="ocr-progress-container"><div class="progress-fill" id="ocr-progress-bar"></div></div>
                <textarea id="ocrResult" placeholder="Recognized text will appear here..." readonly></textarea>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-top: 2rem;">
                    <button class="btn-primary" id="ocr-check-grammar" style="padding: 0.75rem; background: var(--brand-secondary); box-shadow: none;">Check Grammar</button>
                    <button class="btn-primary" id="ocr-copy-btn" style="padding: 0.75rem;">Copy</button>
                    <button class="btn-primary" id="ocr-download-btn" style="padding: 0.75rem; background: var(--brand-success); box-shadow: none;">Save</button>
                    <button class="btn-primary" id="ocr-reset-btn" style="padding: 0.75rem; background: var(--text-sub); box-shadow: none;">Reset</button>
                </div>
                <div id="grammar-issues" class="issues-panel">
                    <h3 style="margin-bottom: 1rem;">Detected Issues</h3>
                    <div id="issues-list"></div>
                    <button class="btn-primary" id="apply-all-fixes" style="margin-top: 1rem; width: 100%;">Apply Cleanup & Normalization</button>
                </div>
            </div>

            <!-- PDF Tab -->
            <div id="jpg-to-pdf" class="tab-content">
                <div class="tool-info">
                    <h3>Professional Images to PDF Converter</h3>
                    <p>Combine multiple JPG images into a single, high-quality PDF document. This is ideal for creating digital portfolios, submitting assignments, or organizing scanned receipts into a single file.</p>
                    <p>Our PDF generator ensures that image quality is maintained while keeping the document size manageable for sharing and archiving.</p>
                    <ul class="tool-steps">
                        <li>Upload all the images you want to merge into a single PDF.</li>
                        <li>The tool automatically scales them to a standard A4 page layout.</li>
                        <li>Download the merged PDF document instantly.</li>
                    </ul>
                    <div class="faq-block">
                        <div class="faq-item-small">
                            <strong>Can I reorder images?</strong>
                            <span>Currently, images are added in the order you select them. For specific ordering, upload them in groups.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Is there a page limit?</strong>
                            <span>The tool can handle dozens of pages, limited only by your browser's available memory.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Are the PDFs searchable?</strong>
                            <span>The resulting PDF contains images. To make it searchable, you would need to run it through an OCR process.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Can I merge PNG files too?</strong>
                            <span>Currently, this tool is optimized for JPG and JPEG files.</span>
                        </div>
                    </div>
                    <div class="privacy-note">Files are processed locally in your browser. Nothing is uploaded.</div>
                </div>
                <div class="drop-zone">
                    <p style="font-weight: 800; font-size: 1.25rem;">Drop images to merge</p>
                    <label class="btn-primary">Select Files</label>
                    <input type="file" class="file-input" multiple accept=".jpg, .jpeg" style="display: none;">
                </div>
                <button class="btn-success convert-button" disabled>Create Document</button>
                <div class="progress-wrapper"><div class="progress-fill"></div></div>
                <div class="results-grid results"></div>
            </div>

            <!-- Favicon Tab -->
            <div id="favicon" class="tab-content">
                <div class="tool-info">
                    <h3>Free Favicon Generator</h3>
                    <p>Convert your brand logo into a complete set of favicons for your website. A favicon is the small icon that appears in browser tabs and bookmarks, essential for a professional web presence.</p>
                    <p>Our generator creates standard sizes (16x16, 32x32, etc.) and bundles them into a convenient ZIP pack for easy deployment.</p>
                    <ul class="tool-steps">
                        <li>Upload a square logo image (PNG or JPG).</li>
                        <li>Wait for the tool to generate the multiple required sizes.</li>
                        <li>Download the ZIP pack containing all your new favicons.</li>
                    </ul>
                    <div class="faq-block">
                        <div class="faq-item-small">
                            <strong>What is the best starting resolution?</strong>
                            <span>We recommend using a 512x512 PNG image for the best results across all sizes.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Which formats are in the ZIP pack?</strong>
                            <span>The pack contains standard .png files in 16x16, 32x32, 48x48, and 64x64 resolutions.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Do I need to pay for the ZIP pack?</strong>
                            <span>No, like all PixelConvert tools, the favicon generator is completely free.</span>
                        </div>
                        <div class="faq-item-small">
                            <strong>Is a square image required?</strong>
                            <span>Yes, favicons are always square. Non-square images will be scaled to fit.</span>
                        </div>
                    </div>
                    <div class="privacy-note">Files are processed locally in your browser. Nothing is uploaded.</div>
                </div>
                <div class="drop-zone">
                    <p style="font-weight: 800; font-size: 1.25rem;">Drop your logo</p>
                    <label class="btn-primary">Select Image</label>
                    <input type="file" class="file-input" accept=".png, .jpg, .jpeg" style="display: none;">
                </div>
                <button class="btn-success convert-button" disabled>Generate Pack</button>
                <div class="progress-wrapper"><div class="progress-fill"></div></div>
                <div class="results-grid results"></div>
            </div>

            <div class="ad-container bottom-ad">Advertisement Space</div>
        </main>

        <section class="faq-grid">
            <div class="faq-item">
                <h4>Ironclad Privacy</h4>
                <p>By leveraging WebAssembly and the Canvas API, we ensure your files never leave your computer. Privacy isn't a feature; it's our foundation.</p>
            </div>
            <div class="faq-item">
                <h4>Lightning Speed</h4>
                <p>No network latency. Batch process dozens of high-res photos in seconds with optimized local algorithms.</p>
            </div>
            <div class="faq-item">
                <h4>Always Free</h4>
                <p>No subscriptions, no watermarks, no registration. Professional tools accessible to everyone, anywhere.</p>
            </div>
        </section>

        <footer>
            <nav class="footer-nav">
                <a href="about.html">About</a>
                <a href="privacy.html">Privacy</a>
                <a href="terms.html">Terms</a>
                <a href="contact.html">Contact</a>
            </nav>
            <p style="font-size: 0.95rem; color: var(--text-sub); font-weight: 600;">Â© 2026 PixelConvert. Built for privacy.</p>
        </footer>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('.theme-icon');
        const themeText = themeToggle.querySelector('.theme-text');
        const body = document.body;

        const savedTheme = localStorage.getItem('theme') || 'light';
        setTheme(savedTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = body.getAttribute('data-theme');
            setTheme(currentTheme === 'light' ? 'dark' : 'light');
        });

        function setTheme(theme) {
            body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            themeIcon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
            themeText.textContent = theme === 'dark' ? 'Light Mode' : 'Dark Mode';
        }

        const JSZip = window.JSZip;
        const { jsPDF } = window.jspdf;
        const fileStore = new Map();
        let currentTargetSize = 0;

        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.dataset.tab;
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                tabContents.forEach(content => content.classList.toggle('active', content.id === tabId));
                const currentFiles = fileStore.get(tabId);
                updateSelectedFilesDisplay(document.getElementById(tabId), currentFiles);
            });
        });

        tabContents.forEach(tab => {
            const dropArea = tab.querySelector('.drop-zone');
            const fileInput = tab.querySelector('.file-input');
            const convertButton = tab.querySelector('.convert-button');
            const tabId = tab.id;

            if (!dropArea || !fileInput) return;

            dropArea.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', () => handleFiles(fileInput.files));
            
            ['dragover', 'dragleave', 'drop'].forEach(evt => {
                dropArea.addEventListener(evt, e => {
                    e.preventDefault(); e.stopPropagation();
                    if (evt === 'dragover') dropArea.classList.add('dragover');
                    if (evt === 'dragleave' || evt === 'drop') dropArea.classList.remove('dragover');
                    if (evt === 'drop') handleFiles(e.dataTransfer.files);
                });
            });
            
            function handleFiles(files) {
                if (files.length > 0) {
                    fileStore.set(tabId, files);
                    updateSelectedFilesDisplay(tab, files);
                    if (convertButton) convertButton.disabled = false;
                }
            }

            if (convertButton) {
                convertButton.addEventListener('click', e => {
                    e.stopPropagation();
                    const files = fileStore.get(tabId);
                    if (files) executeConversion(tabId, files);
                });
            }
            
            const qualitySlider = tab.querySelector('input[type="range"]');
            if (qualitySlider) {
                const qValue = tab.querySelector('.quality-value');
                qualitySlider.addEventListener('input', e => { if (qValue) qValue.textContent = e.target.value; });
            }
        });

        const compressTab = document.getElementById('compress');
        compressTab.querySelectorAll('.preset-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                compressTab.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentTargetSize = parseInt(btn.dataset.target);
                const qInput = compressTab.querySelector('#compress-quality');
                qInput.disabled = currentTargetSize > 0;
                compressTab.querySelector('.quality-value').textContent = currentTargetSize > 0 ? 'Auto' : qInput.value;
            });
        });

        const ocrOutput = document.getElementById('ocrResult');
        document.getElementById('ocr-copy-btn').addEventListener('click', () => {
            ocrOutput.select();
            document.execCommand('copy');
            alert('Text copied!');
        });

        document.getElementById('ocr-download-btn').addEventListener('click', () => {
            if (!ocrOutput.value) return;
            const a = document.createElement('a');
            a.href = URL.createObjectURL(new Blob([ocrOutput.value], { type: 'text/plain' }));
            a.download = 'extracted_text.txt';
            a.click();
        });

        document.getElementById('ocr-reset-btn').addEventListener('click', () => {
            ocrOutput.value = '';
            fileStore.delete('ocr');
            updateSelectedFilesDisplay(document.getElementById('ocr'), null);
            document.getElementById('ocr-start-btn').disabled = true;
            document.getElementById('ocr-progress-container').style.display = 'none';
            document.getElementById('grammar-issues').style.display = 'none';
        });

        async function executeConversion(tabId, files) {
            const tab = document.getElementById(tabId);
            setInProgress(tab, true);
            const resultsContainer = tab.querySelector('.results');
            if (resultsContainer) resultsContainer.innerHTML = '';

            try {
                let results = [];
                switch (tabId) {
                    case 'heic-to-jpg': results = await convertHeic(files, tab); break;
                    case 'webp-to-jpg': results = await convertCanvas(files, tab, 'image/jpeg', '.jpg'); break;
                    case 'png-to-jpg': results = await convertCanvas(files, tab, 'image/jpeg', '.jpg', tab.querySelector('#png-to-jpg-quality').value); break;
                    case 'jpg-to-png': results = await convertCanvas(files, tab, 'image/png', '.png'); break;
                    case 'compress': results = await compressLogic(files, tab); break;
                    case 'ocr': await performOCR(files[0], tab); break;
                    case 'jpg-to-pdf': results = await convertPdf(files, tab); break;
                    case 'favicon': results = await convertFavicon(files[0], tab); break;
                }
                if (results && results.length > 0) displayResults(tab, results);
            } catch (e) {
                alert('Error: ' + e.message);
            } finally {
                setInProgress(tab, false);
            }
        }

        async function convertHeic(files, tab) {
            const res = [];
            const bar = tab.querySelector('.progress-fill');
            for (let i = 0; i < files.length; i++) {
                bar.style.width = (i/files.length)*100 + '%';
                const blob = await heic2any({ blob: files[i], toType: 'image/jpeg', quality: 0.9 });
                res.push({ name: files[i].name.replace(/\.[^/.]+$/, "") + '.jpg', blob, originalSize: files[i].size });
            }
            return res;
        }

        async function convertCanvas(files, tab, format, ext, quality) {
            const res = [];
            const bar = tab.querySelector('.progress-fill');
            for (let i = 0; i < files.length; i++) {
                bar.style.width = (i/files.length)*100 + '%';
                const blob = await new Promise(r => {
                    const img = new Image();
                    img.onload = () => {
                        const c = document.createElement('canvas');
                        c.width = img.width; c.height = img.height;
                        c.getContext('2d').drawImage(img, 0, 0);
                        c.toBlob(r, format, parseFloat(quality) || 0.92);
                    };
                    img.src = URL.createObjectURL(files[i]);
                });
                res.push({ name: files[i].name.replace(/\.[^/.]+$/, "") + ext, blob, originalSize: files[i].size });
            }
            return res;
        }

        async function compressLogic(files, tab) {
            const res = [];
            const bar = tab.querySelector('.progress-fill');
            const tw = tab.querySelector('#compress-resize').value;
            const mq = parseFloat(tab.querySelector('#compress-quality').value);

            for (let i = 0; i < files.length; i++) {
                bar.style.width = (i/files.length)*100 + '%';
                const blob = await new Promise(r => {
                    const img = new Image();
                    img.onload = async () => {
                        const c = document.createElement('canvas');
                        let w = img.width, h = img.height;
                        if (tw !== 'original') {
                            const target = parseInt(tw);
                            if (w > target) { h = (target/w)*h; w = target; }
                        }
                        c.width = w; c.height = h;
                        c.getContext('2d').drawImage(img, 0, 0, w, h);
                        if (currentTargetSize > 0) {
                            let low = 0.1, high = 0.95, best = null;
                            for (let j=0; j<6; j++) {
                                const mid = (low+high)/2;
                                const b = await new Promise(ok => c.toBlob(ok, 'image/jpeg', mid));
                                if (b.size <= currentTargetSize) { best = b; low = mid; } else { high = mid; }
                            }
                            r(best || (await new Promise(ok => c.toBlob(ok, 'image/jpeg', 0.1))));
                        } else {
                            c.toBlob(r, 'image/jpeg', mq);
                        }
                    };
                    img.src = URL.createObjectURL(files[i]);
                });
                res.push({ name: files[i].name.replace(/\.[^/.]+$/, "") + "_comp.jpg", blob, originalSize: files[i].size });
            }
            return res;
        }

        async function preprocessForOCR(file) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width; canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    const data = imageData.data;
                    const isGrayscale = document.getElementById('ocr-grayscale').checked;
                    const isContrast = document.getElementById('ocr-contrast').checked;
                    const threshold = parseInt(document.getElementById('ocr-threshold').value);
                    for (let i = 0; i < data.length; i += 4) {
                        let r = data[i], g = data[i+1], b = data[i+2];
                        if (isGrayscale || isContrast) {
                            let gray = 0.299 * r + 0.587 * g + 0.114 * b;
                            if (isContrast) gray = (gray - 128) * 1.5 + 128;
                            if (threshold > 0) gray = gray >= threshold ? 255 : 0;
                            data[i] = data[i+1] = data[i+2] = gray;
                        }
                    }
                    ctx.putImageData(imageData, 0, 0);
                    resolve(canvas);
                };
                img.onerror = reject;
                img.src = URL.createObjectURL(file);
            });
        }

        async function performOCR(file, tab) {
            const container = document.getElementById('ocr-progress-container');
            const bar = document.getElementById('ocr-progress-bar');
            const output = document.getElementById('ocrResult');
            container.style.display = 'block';
            bar.style.width = '0%';
            output.value = 'Self-check: Verifying local OCR assets...';
            
            const paths = {
                worker: "/ocr/worker.min.js",
                core: "/ocr/tesseract-core.wasm.js",
                lang: "/ocr/tessdata"
            };

            try {
                const checks = [
                    fetch(paths.worker, { method: 'HEAD' }),
                    fetch(paths.core, { method: 'HEAD' }),
                    fetch(`${paths.lang}/eng.traineddata.gz`, { method: 'HEAD' }),
                    fetch(`${paths.lang}/kor.traineddata.gz`, { method: 'HEAD' })
                ];
                const results = await Promise.all(checks);
                const failed = results.findIndex(r => !r.ok);
                if (failed !== -1) {
                    const failedFile = failed === 0 ? 'worker.min.js' : failed === 1 ? 'tesseract-core.wasm.js' : failed === 2 ? 'eng.traineddata.gz' : 'kor.traineddata.gz';
                    throw new Error(`Missing local asset: ${failedFile}`);
                }
            } catch (e) {
                output.value = `Asset Error: ${e.message}\nMake sure you've uploaded the /ocr/ folder.`;
                return;
            }

            output.value = 'Initializing local OCR engine...';
            let worker;
            const timeout = setTimeout(() => {
                if (output.value.includes('Initializing') || output.value.includes('loading')) {
                    output.value = "OCR engine failed to load (Timeout).";
                    if (worker) worker.terminate();
                }
            }, 30000);

            try {
                const canvas = await preprocessForOCR(file);
                output.value = 'Engine loading...';
                worker = await Tesseract.createWorker({
                    logger: m => {
                        if (m.status === 'recognizing text') {
                            const p = Math.round(m.progress * 100);
                            bar.style.width = p + '%';
                            output.value = `Recognizing text... ${p}%`;
                        } else {
                            output.value = `${m.status}...`;
                        }
                    },
                    workerPath: paths.worker,
                    corePath: paths.core,
                    langPath: paths.lang
                });

                await worker.loadLanguage('eng+kor');
                await worker.initialize('eng+kor');
                clearTimeout(timeout);
                const { data: { text } } = await worker.recognize(canvas);
                output.value = text || 'No text found.';
                await worker.terminate();
            } catch (error) {
                clearTimeout(timeout);
                console.error('OCR Error:', error);
                output.value = `Critical Error: ${error.message}`;
                if (worker) await worker.terminate();
            }
        }

        // Grammar Check Logic
        document.getElementById('ocr-check-grammar').addEventListener('click', async () => {
            const text = ocrOutput.value;
            if (!text || text.length < 5) return;
            
            const panel = document.getElementById('grammar-issues');
            const list = document.getElementById('issues-list');
            panel.style.display = 'block';
            list.innerHTML = 'Analyzing text...';

            try {
                const response = await fetch('https://api.languagetool.org/v2/check', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: `language=en-US&text=${encodeURIComponent(text)}`
                });
                const data = await response.json();
                
                list.innerHTML = '';
                if (data.matches.length === 0) {
                    list.innerHTML = '<p style="color: var(--brand-success);">No issues found!</p>';
                } else {
                    data.matches.forEach(match => {
                        const div = document.createElement('div');
                        div.className = 'issue-item';
                        div.innerHTML = `
                            <p class="issue-message">${match.message}</p>
                            <p style="font-size: 0.85rem; margin-bottom: 0.5rem;">"${text.substring(match.offset, match.offset + match.length)}"</p>
                            <div>
                                ${match.replacements.slice(0, 3).map(rep => `<button class="suggestion-btn" onclick="window.applyGrammarFix(${match.offset}, ${match.length}, '${rep.value.replace(/'/g, "\\'")}')">${rep.value}</button>`).join('')}
                            </div>
                        `;
                        list.appendChild(div);
                    });
                }
            } catch (e) {
                list.innerHTML = 'Error connecting to grammar engine.';
            }
        });

        window.applyGrammarFix = (offset, length, replacement) => {
            const text = ocrOutput.value;
            ocrOutput.value = text.substring(0, offset) + replacement + text.substring(offset + length);
            document.getElementById('ocr-check-grammar').click(); // Re-check
        };

        document.getElementById('apply-all-fixes').addEventListener('click', () => {
            let text = ocrOutput.value;
            // 1. Remove double spaces
            text = text.replace(/\s\s+/g, ' ');
            // 2. Normalize punctuation spacing
            text = text.replace(/\s([,.!?;:])/g, '$1');
            // 3. Sentence capitalization
            text = text.replace(/(^\s*|[.!?]\s+)([a-z])/g, (m, p1, p2) => p1 + p2.toUpperCase());
            ocrOutput.value = text.trim();
            alert('Cleanup and normalization applied!');
        });

        async function convertPdf(files, tab) {
            const pdf = new jsPDF();
            for (let i = 0; i < files.length; i++) {
                if (i > 0) pdf.addPage();
                const dataUrl = await new Promise(r => {
                    const reader = new FileReader();
                    reader.onload = e => r(e.target.result);
                    reader.readAsDataURL(files[i]);
                });
                const img = new Image();
                await new Promise(r => { img.onload = r; img.src = dataUrl; });
                const ratio = img.width / img.height;
                pdf.addImage(dataUrl, 'JPEG', 0, 0, 210, 210/ratio);
            }
            return [{ name: 'document.pdf', blob: pdf.output('blob'), originalSize: 0 }];
        }

        async function convertFavicon(file, tab) {
            const zip = new JSZip();
            const source = await new Promise(r => {
                const img = new Image(); img.onload = () => r(img);
                img.src = URL.createObjectURL(file);
            });
            for (const s of [16, 32, 48, 64]) {
                const c = document.createElement('canvas');
                c.width = c.height = s;
                c.getContext('2d').drawImage(source, 0, 0, s, s);
                const b = await new Promise(ok => c.toBlob(ok, 'image/png'));
                zip.file(`favicon-${s}x${s}.png`, b);
            }
            const blob = await zip.generateAsync({ type: 'blob' });
            return [{ name: 'favicon_pack.zip', blob, originalSize: file.size, noPreview: true }];
        }

        function displayResults(tab, data) {
            const container = tab.querySelector('.results');
            if (!container) return;
            if (data.length > 1) {
                const zip = new JSZip();
                data.forEach(r => zip.file(r.name, r.blob));
                zip.generateAsync({ type: 'blob' }).then(b => {
                    container.prepend(createResultCard({ name: 'all_files.zip', blob: b, originalSize: 0, noPreview: true }));
                });
            }
            data.forEach(r => container.appendChild(createResultCard(r)));
        }

        function createResultCard(res) {
            const div = document.createElement('div');
            div.className = 'result-card';
            const url = URL.createObjectURL(res.blob);
            const reduction = res.originalSize ? Math.round((1 - res.blob.size/res.originalSize)*100) : 0;
            div.innerHTML = `
                ${res.noPreview ? '' : `<img src="${url}" style="width: 60px; height: 60px; border-radius: 12px; object-fit: cover;">`}
                <div style="flex-grow: 1;">
                    <strong style="display:block; margin-bottom: 0.25rem;">${res.name}</strong>
                    <p style="font-size: 0.85rem; color: var(--text-sub);">${formatBytes(res.blob.size)} ${reduction > 0 ? `<span style="color: var(--brand-success); font-weight: 800;">(${reduction}% optimized)</span>` : ''}</p>
                </div>
                <a href="${url}" download="${res.name}" class="btn-primary" style="padding: 0.6rem 1.2rem; font-size: 0.85rem; box-shadow: none;">Download</a>
            `;
            return div;
        }

        function updateSelectedFilesDisplay(tab, files) {
            const p = tab.querySelector('.drop-zone p:first-child');
            if (!p) return;
            p.textContent = (!files || files.length === 0) ? `Drop ${tab.id === 'ocr' ? 'image' : 'files'} here` : (files.length === 1 ? `Selected: ${files[0].name}` : `${files.length} files selected`);
        }

        function setInProgress(tab, busy) {
            const btn = tab.querySelector('.convert-button');
            const bar = tab.querySelector('.progress-wrapper');
            if (btn) btn.disabled = busy;
            if (bar) bar.style.display = busy ? 'block' : 'none';
        }

        function formatBytes(b) {
            if (b === 0) return '0 B';
            const i = Math.floor(Math.log(b) / Math.log(1024));
            return (b / Math.pow(1024, i)).toFixed(2) * 1 + ' ' + ['B', 'KB', 'MB', 'GB'][i];
        }
    });
    </script>
</body>
</html>